<html>
    <head>
        <link rel="stylesheet" href="https://dadata.ru/static/css/lib/suggestions-15.2.css" type="text/css"/>
    </head>
    <body>
        <table>
            <caption>Проверка по справочнику экстремистов</caption>
            <tr>
                <td>ФИО</td>
                <td>
                    <input size="50" id="fullname" name="fullname" type="text"/>
                </td>
            </tr>
            <tr>
                <td>Дата рождения</td>
                <td>
                    <input size="50" id="birthdate" name="birthdate" type="text"/>
                </td>
            </tr>
            <tr>
                <td>Место рождения</td>
                <td>
                    <input size="50" id="birthplace" name="birthplace" type="text"/>
                </td>
            </tr>
            <tr>
                <td>ИНН</td>
                <td>
                    <input size="50" id="inn" name="inn" type="text"/>
                </td>
            </tr>
            <tr>
                <td>Адрес</td>
                <td>
                    <input size="50" id="address" name="address" type="text"/>
                </td>
            </tr>
            <tr>
                <td>Документ</td>
                <td>
                    <input size="50" id="doc" name="doc" type="text"/>
                </td>
            </tr>
            <tr>
                <td/>
                <td>
                    <button id="checkBlacklist">Проверить на вхождение в ЧС</button>
                </td>
            </tr>
        </table>

        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://dadata.ru/static/js/lib/jquery.suggestions-15.2.min.js"></script>
        <script type="text/javascript">
            $("#fullname").suggestions({
            serviceUrl: "https://dadata.ru/api/v2",
            token: "d98e44666ddbd4718f782a71e1d64964cd03896a",
            type: "NAME"
            });
        </script>
        <script type="text/javascript">
            $("#address").suggestions({
            serviceUrl: "https://dadata.ru/api/v2",
            token: "d98e44666ddbd4718f782a71e1d64964cd03896a",
            type: "ADDRESS"
            });
        </script>
        <script type="text/javascript">
            document.getElementById('checkBlacklist').onclick = checkBlacklist;
            function checkBlacklist() {
            var url = "http://cdi-prototype:8080/cdi/soap/services/2_13/PartyRA/checkBlacklist";

            //request params
            var fullname = document.getElementById('fullname').value;
            var birthdate = document.getElementById('birthdate').value;
            var birthplace = document.getElementById('birthplace').value;
            var inn = document.getElementById('inn').value;
            var address = document.getElementById('address').value;
            var doc = document.getElementById('doc').value;

            var text = '{  \
   "includePartyFields":"true",\
   "party":{  \
      "field":[  \
         {  \
            "value":"' + fullname + '",\
            "name":"fullNameRawSource"\
         },\
         {  \
            "value":"' + birthdate + '",\
            "name":"birthdateRawSource"\
         },\
         {  \
            "value":"' + birthplace + '",\
            "name":"birthPlace"\
         },\
         {  \
            "value":"' + inn + '",\
            "name":"inn"\
         }\
      ],\
      "sourceSystem":"AL",\
      "rawId":"1",\
      "type":"PHYSICAL"\
   }\
}';

            var client = new XMLHttpRequest();

            client.open("POST", url, false);

            client.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            client.setRequestHeader("Authorization", "Basic cGVyZm9ybWVyOjEyMzQ1Ng==");

            client.send(text);

            if (client.status == 200)
                alert("The request succeeded!\n\nThe response representation was:\n\n" + client.responseText);
            else
                alert("The request did not succeed!\n\nThe response status was: " + client.status + " " + client.statusText + ".");
            }
        </script>
    </body>
</html>
